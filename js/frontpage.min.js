function lightbox_open(t,e,i){"undefined"!=typeof i&&$(["#popup_",t].join("")).html(["<div>",i,"</div>"].join("")),$(["#popup_",t].join("")).fadeIn(fad_Duration),$("#fade").fadeIn(fad_Duration),$("#fade").click(function(){lightbox_close(t)}),$(["#popup_",t].join("")).click(function(){lightbox_close(t)}),tempo=setTimeout(function(){lightbox_close(t)},e)}function lightbox_close(t){$(["#popup_",t].join("")).fadeOut(fad_Duration),$("#fade").fadeOut(fad_Duration),$("#fade").off("click"),$(["#popup_",t].join("")).off("click"),clearTimeout(tempo)}function helpBox_open(t){$("#popup_help").html('<div>Bad value, click <a target="_blank" href="'+$.domoticzurl+"/json.htm?type=devices&rid="+t+'">here</a> to show what you can use..</div>'),$("#popup_help").fadeIn(fad_Duration),$("#fade").fadeIn(fad_Duration),$("#popup_help").click(helpBox_close),tempo=setTimeout(helpBox_close,3e4)}function helpBox_close(){$("#popup_help").fadeOut(fad_Duration),$("#fade").fadeOut(fad_Duration),clearTimeout(tempo)}function showPanel(){$("#popup_secpanel").html(['<object type="text/html" data="',$.domoticzurl,'/secpanel/index.html" width="100%" height="100%"></object>'].join("")),$("#popup_secpanel").fadeIn(fad_Duration),$("#fade").fadeIn(fad_Duration),$("#fade").click(closePanel),tempo=setTimeout(closePanel,6e4)}function closePanel(){$("#popup_secpanel").fadeOut(fad_Duration),$("#fade").fadeOut(fad_Duration),$("#fade").off("click"),$("#popup_secpanel").html(""),clearTimeout(tempo)}function LoadMeteoWidget(){""===city?($("#popup_meteo0").html('<div width="650" height="250" valign="center" line-height="15px">Veuillez indiquer votre ville dans les paramètres<br>exemple:<br>var city = \'paris\'</div>'),$("#popup_meteo1").html('<div width="650" height="250" valign="center" line-height="15px">Veuillez indiquer votre ville dans les paramètres<br>exemple:<br>var city = \'paris\'</div>'),$("#popup_meteo2").html('<div width="650" height="250" valign="center" line-height="15px">Veuillez indiquer votre ville dans les paramètres<br>exemple:<br>var city = \'paris\'</div>'),$("#popup_meteo3").html('<div width="650" height="250" valign="center" line-height="15px">Veuillez indiquer votre ville dans les paramètres<br>exemple:<br>var city = \'paris\'</div>')):($("#popup_meteo0").html(['<img src="http://www.prevision-meteo.ch/uploads/widget/',city,"_0.png?timestamp=",(new Date).getTime(),'" width="650" height="250" alt="Ville inconnue..">'].join("")),$("#popup_meteo1").html(['<img src="http://www.prevision-meteo.ch/uploads/widget/',city,"_1.png?timestamp=",(new Date).getTime(),'" width="650" height="250" alt="Ville inconnue..">'].join("")),$("#popup_meteo2").html(['<img src="http://www.prevision-meteo.ch/uploads/widget/',city,"_2.png?timestamp=",(new Date).getTime(),'" width="650" height="250" alt="Ville inconnue..">'].join("")),$("#popup_meteo3").html(['<img src="http://www.prevision-meteo.ch/uploads/widget/',city,"_3.png?timestamp=",(new Date).getTime(),'" width="650" height="250" alt="Ville inconnue..">'].join(""))),setInterval(LoadMeteoWidget,36e5)}function RefreshGraphData(t,e,i,a,n,o){$.ajax({url:[$.domoticzurl,"/json.htm?type=graph&sensor=",i,"&idx=",t,"&range=",a,"&jsoncallback=?"].join(""),xIDX:t,vdesc:e,vtype:i,vrange:a,vunit:o,vpara:n}).done(function(t){var i=[],a=[],s=[];"p1"===n?($.each(t.result,function(t,e){var n=parseInt(e.d.substring(0,4)),o=parseInt(e.d.substring(5,7)),s=parseInt(e.d.substring(8,10)),r=parseInt(e.d.substring(11,13)),l=parseInt(e.d.substring(14,16)),c=Date.UTC(n,o-1,s,r,l),d=[c,parseFloat(e.v)],p=[c,parseFloat(e.v2)];i.push(d),a.push(p)}),s=[{data:i,color:"#3333FF",borderWidth:2},{data:a,color:"#0099FF",borderWidth:2}]):($.each(t.result,function(t,e){var a=parseInt(e.d.substring(0,4)),o=parseInt(e.d.substring(5,7)),s=parseInt(e.d.substring(8,10)),r=parseInt(e.d.substring(11,13)),l=parseInt(e.d.substring(14,16)),c=Date.UTC(a,o-1,s,r,l),d=[c,parseFloat(e[n])];i.push(d)}),s=[{data:i,color:"#3333FF",borderWidth:2}]),createGraph(s,e,o)})}function createGraph(t,e,i){$("#popup_graph").highcharts({chart:{backgroundColor:"white",plotBackgroundColor:"none",type:"line",zoomType:"none",animation:!1,reflow:!1},plotOptions:{area:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},arearange:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},areaspline:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},areasplinerange:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},bar:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},boxplot:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},bubble:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},column:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},columnrange:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},errorbar:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},funnel:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},gauge:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},heatmap:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},line:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},pie:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},polygon:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},pyramid:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},scatter:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},series:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},solidgauge:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},spline:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},treemap:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}},waterfall:{animation:!1,enableMouseTracking:!1,stickyTracking:!0,shadow:!1,dataLabels:{style:{textShadow:!1}}}},subtitle:{text:""},title:{text:e},tooltip:{formatter:function(){return["<b>",y,"</b>"].join("")}},legend:{enabled:!1},credits:{enabled:!1},xAxis:{type:"datetime",minRange:36e5,title:{text:"time",style:{font:"bold 13px Tahoma, sans-serif"},opposite:!0}},yAxis:{title:{text:i,style:{font:"bold 13px Tahoma, sans-serif"},opposite:!0}},series:t}),lightbox_open("graph",25400)}function RefreshData(){clearInterval($.refreshTimer),$.ajax({url:[$.domoticzurl,"/json.htm?type=command&param=getSunRiseSet&jsoncallback=?"].join("")}).done(function(t){"undefined"!=typeof t?$.each(t,function(t,e){"Sunrise"===t?var_sunrise=e.substring(0,5):"Sunset"===t&&(var_sunset=e.substring(0,5))}):console.log("Undefined");var e=new Date,i=e.getDate().toString();i=i.trim(),1===i.length&&(i=["0",i].join(""));var a=(e.getMonth()+1).toString();a=a.trim(),1===a.length&&(a=["0",a].join("")),mdate=[a,i].join(""),mdate>="1222"?("undefined"!=typeof bg_day_winter&&""!==bg_day_winter&&(bg_day=bg_day_winter),"undefined"!=typeof bg_night_winter&&""!==bg_night_winter&&(bg_night=bg_night_winter)):mdate>="0923"?("undefined"!=typeof bg_day_autumn&&""!==bg_day_autumn&&(bg_day=bg_day_autumn),"undefined"!=typeof bg_night_autumn&&""!==bg_night_autumn&&(bg_night=bg_night_autumn)):mdate>="0621"?("undefined"!=typeof bg_day_summer&&""!==bg_day_summer&&(bg_day=bg_day_summer),"undefined"!=typeof bg_night_summer&&""!==bg_night_summer&&(bg_night=bg_night_summer)):("undefined"!=typeof bg_day_spring&&""!==bg_day_spring&&(bg_day=bg_day_spring),"undefined"!=typeof bg_night_spring&&""!==bg_night_spring&&(bg_night=bg_night_spring));var n=e.getHours(),o=e.getMinutes(),s=var_sunrise.substring(0,2),r=var_sunrise.substring(3,5),l=var_sunset.substring(0,2),c=var_sunset.substring(3,5);s=parseInt(s,10),r=parseInt(r,10),l=parseInt(l,10),c=parseInt(c,10);var d=60*n+o,p=60*s+r,g=60*l+c;d>g||p>d?(IsNight="Yes","undefined"!=typeof bg_day&&($(["<style>html::after{background:rgba(0,0,0,",bg_nightBright,")}</style>"].join("")).appendTo("head"),document.body.style.background=["black url(icons/",bg_night,") no-repeat top center fixed"].join(""),document.body.style.backgroundSize=bg_size,$("div.horloge").length>0&&($("div.horloge").css("-webkit-filter","invert(1)"),$("div.horloge").css("filter","invert(1)"),$("div.horloge").css("border","10px solid #C5AB79"),$("div.horloge").css("box-shadow","0 0 10px #ffffff, 0 0 50px 10px #cccccc inset"),$("<style>.horloge:before {box-shadow: -2px -2px 5px #ffffff inset, -2px 2px 5px #ffffff inset, 2px -2px 5px #ffffff inset, 2px 2px 5px #ffffff inset}</style>").appendTo("head")))):(IsNight="No","undefined"!=typeof bg_night&&($(["<style>html::after{background:rgba(0,0,0,",bg_dayBright,")}</style>"].join("")).appendTo("head"),document.body.style.background=["black url(icons/",bg_day,") no-repeat top center fixed"].join(""),document.body.style.backgroundSize=bg_size,$("div.horloge").length>0&&($("div.horloge").css("-webkit-filter","invert(0)"),$("div.horloge").css("filter","invert(0)"),$("div.horloge").css("border","10px solid #3A5486"),$("div.horloge").css("box-shadow","0 0 10px #000000, 0 0 50px 10px #CCCCCC inset"),$("<style>.horloge:before {box-shadow: -2px -2px 5px #000000 inset, -2px 2px 5px #000000 inset, 2px -2px 5px #000000 inset, 2px 2px 5px #000000 inset}</style>").appendTo("head")))),$("#popup_offline").fadeOut(fad_Duration),$("#fade2").fadeOut(fad_Duration),error=0}).fail(function(){error+=1,console.log(["ERROR connect to ",$.domoticzurl].join("")),error>=3?($("#popup_offline").fadeIn(fad_Duration),$("#fade2").fadeIn(fad_Duration)):new RefreshData}),$.ajax({url:[$.domoticzurl,"/json.htm?type=devices&plan=",$.roomplan,"&jsoncallback=?"].join("")}).done(function(data){"undefined"!=typeof data.result&&$.each(data.result,function(i,item){var ii=0,len=$.PageArray.length;jsKata.nofreeze.forloop(function(){return len>ii},function(){ii++},function fct(){if($.PageArray[ii][0]===item.idx||$.PageArray[ii][0]===item.Name){var vtype=$.PageArray[ii][1],vlabel=$.PageArray[ii][2],vdesc=$.PageArray[ii][3],lastseen=$.PageArray[ii][4],vplusmin=$.PageArray[ii][5],vattr=$.PageArray[ii][6],valarm=$.PageArray[ii][7],vdata=item[vtype],vstatus=item.Status,vls=item.LastUpdate,vdimmercurrent=item.LevelInt;if("undefined"==typeof vdata?vdata=['<span onclick="helpBox_open(',item.idx,')">?!</span>'].join(""):(vdata=String(vdata).split("Watt",1)[0],vdata=String(vdata).split("kWh",1)[0],vdata=String(vdata).split("%",1)[0],vdata=String(vdata).split(" Level:",1)[0],vdata=String(vdata).replace("Set","On"),vdata=String(vdata).split("m3",1)[0],vdata=String(vdata).replace("true","protected")),"Euro"===vtype&&(vdata=item.Data),alarmcss="","Push On Button"===item.SwitchType&&(vdata="Off"),"Push Off Button"===item.SwitchType&&(vdata="On"),("undefined"==typeof lastseen||""===lastseen)&&(lastseen="0"),"ForecastStr"!==vtype&&("1"===lastseen||"3"===lastseen)&&$(["div.ls_",vlabel].join("")).length>0&&$(["div.ls_",vlabel].join("")).html(vls),"Wakeup"===vtype&&(vdata=goodmorning(item.Data)),"Level"===vtype&&"Dimmer"===item.SwitchType){if("Off"===vstatus?(alarmcss=";color:#E24E2A;",vdata=txt_off):alarmcss=";color:#1B9772;",vdata===txt_off){if("2"===lastseen)var hlp=['<img src="',$.domoticzurl,'/images/Light48_Off.png" width=48 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_switch_on,')" style=',alarmcss,">"].join("");else var hlp=['<span onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_switch_on,')" style=',alarmcss,">",vdata,"</span>"].join("");var plus="",min=""}else if(100===item.MaxDimLevel){if("2"===lastseen){var hlp=['<img src="',$.domoticzurl,'/images/Light48_On.png" width=48 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_switch_off,')" style=',alarmcss,">"].join("");vdesc=String(vdesc).replace(vdesc,[vdesc,'<span class="percent">',vdata,'<span style="font-size:70%;"> &#37;</span></span>'].join(""))}else var hlp=['<span onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_switch_off,')" style=',alarmcss,">",vdata,"</span>"].join("");var plus=["<img src=icons/plus.png align=right hspace=10 vspace=4 width=30 onclick=\"DimLevel100('plus',",vdata,",",item.idx,')">'].join(""),min=["<img src=icons/min.png align=left hspace=10 vspace=4 width=30 onclick=\"DimLevel100('min',",vdata,",",item.idx,')">'].join("")}else{if("2"===lastseen){var hlp=['<img src="',$.domoticzurl,'/images/Light48_On.png" width=48 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_switch_off,')" style=',alarmcss,">"].join("");vdesc=String(vdesc).replace(vdesc,[vdesc,'<span class="percent">',vdata,'<span style="font-size:70%;"> &#37;</span></span>'].join(""))}else var hlp=['<span onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_switch_off,')" style=',alarmcss,">",vdata,"</span>"].join("");var plus=["<img src=icons/plus.png align=right hspace=10 vspace=4 width=30 onclick=\"DimLevel16('plus',",vdata,",",item.idx,",",vdimmercurrent,')">'].join(""),min=["<img src=icons/min.png align=left hspace=10 vspace=4 width=30 onclick=\"DimLevel16('min',",vdata,",",item.idx,",",vdimmercurrent,')">'].join("")}vdata=min.concat(hlp,plus)}if("SetPoint"===vtype&&vplusmin>0){var hlp=["<span style=",vattr,">",vdata,"</span>"].join(""),plus=["<img src=icons/plus.png align=right vspace=4 width=30 onclick=\"ChangeTherm('plus',",vplusmin,",",item.idx,",",vdata,",",valarm,')">'].join(""),min=["<img src=icons/min.png align=left vspace=4 width=30 onclick=\"ChangeTherm('min',",vplusmin,",",item.idx,",",vdata,",",valarm,')">'].join("");vdata=min.concat(hlp,plus)}if("Blinds"===item.SwitchType){if("Closed"===vdata)var down=["<img src=",$.domoticzurl,'/images/blinds48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join("");if("Open"===vdata||"Stopped"===vdata)var down=["<img src=",$.domoticzurl,'/images/blinds48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join("");var stop=["<img src=",$.domoticzurl,'/images/blindsstop.png  hspace=1 height=40 onclick="SwitchToggle(',item.idx,", 'Stop');lightbox_open('switch', ",switch_timeout,", ",txt_blind_stop,')">'].join("");vdata="RFY"===item.Type?down.concat(stop,up):down.concat(up)}if("Blinds Inverted"===item.SwitchType){if("Closed"===vdata)var down=["<img src=",$.domoticzurl,'/images/blinds48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join("");if("Open"===vdata||"Stopped"===vdata)var down=["<img src=",$.domoticzurl,'/images/blinds48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src="+$.domoticzurl,'/images/blindsopen48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join("");var stop=["<img src=",$.domoticzurl,'/images/blindsstop.png  hspace=1 height=40 onclick="SwitchToggle(',item.idx,", 'Stop');lightbox_open('switch', ",switch_timeout,", ",txt_blind_stop,')">'].join("");vdata="RFY"===item.Type?down.concat(stop,up):down.concat(up)}if("Venetian Blinds EU"===item.SwitchType||"Venetian Blinds US"===item.SwitchType){if("Closed"===vdata)var down=["<img src=",$.domoticzurl,'/images/blinds48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join("");if("Open"===vdata||"Stopped"===vdata)var down=["<img src=",$.domoticzurl,'/images/blinds48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join("");var stop=["<img src=",$.domoticzurl,'/images/blindsstop.png  hspace=1 height=40 onclick="SwitchToggle(',item.idx,", 'Stop');lightbox_open('switch', ",switch_timeout,", ",txt_blind_stop,')">'].join("");vdata=down.concat(stop,up)}if("Blinds Percentage"===item.SwitchType){if("Closed"===item.Status){vdata=100;var down=["<img src=",$.domoticzurl,'/images/blinds48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join(""),plus=["<img src=icons/plus.png  vspace=4 hspace=4 width=30 onclick=\"DimLevel100('min',",vdata,",",item.idx,')">'].join(""),min=["<img src=icons/min.png  vspace=4 hspace=4 width=30 onclick=\"DimLevel100('plus',",vdata,",",item.idx,')">'].join("")}else if("Open"===item.Status)var down=["<img src=",$.domoticzurl,'/images/blinds48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join(""),plus=["<img src=icons/plus.png  vspace=4 hspace=4 width=30 onclick=\"DimLevel100('min',",vdata,",",item.idx,')">'].join(""),min=["<img src=icons/min.png  vspace=4 hspace=4 width=30 onclick=\"DimLevel100('plus',",vdata,",",item.idx,')">'].join("");else var down=["<img src=",$.domoticzurl,'/images/blinds48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join(""),plus=["<img src=icons/plus.png  vspace=4 hspace=4 width=30 onclick=\"DimLevel100('min',",vdata,",",item.idx,')">'].join(""),min=["<img src=icons/min.png  vspace=4 hspace=4 width=30 onclick=\"DimLevel100('plus',",vdata,",",item.idx,')">'].join("");vdesc=String(vdesc).replace(vdesc,[vdesc,'<span class="percent">',100-vdata,'<span style="font-size:50%;"> &#37;</span></span>'].join("")),vdata=min.concat(down,up,plus)}if("Blinds Percentage Inverted"===item.SwitchType){if("Closed"===item.Status)var down=["<img src=",$.domoticzurl,'/images/blinds48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join(""),plus=["<img src=icons/plus.png vspace=4 hspace=4 width=30 onclick=\"DimLevel100('plus',",vdata,",",item.idx,')">'].join(""),min=["<img src=icons/min.png vspace=4 hspace=4 width=30 onclick=\"DimLevel100('min',",vdata,",",item.idx,')">'].join("");else if("Open"===item.Status){vdata=100;var down=["<img src=",$.domoticzurl,'/images/blinds48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join(""),plus=["<img src=icons/plus.png vspace=4 hspace=4 width=30 onclick=\"DimLevel100('plus',",vdata,",",item.idx,')">'].join(""),min=["<img src=icons/min.png vspace=4 hspace=4 width=30 onclick=\"DimLevel100('min',",vdata,",",item.idx,')">'].join("")}else var down=["<img src=",$.domoticzurl,'/images/blinds48.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_blind_down,')">'].join(""),up=["<img src=",$.domoticzurl,'/images/blindsopen48sel.png  hspace=1 width=40 onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_blind_up,')">'].join(""),plus=["<img src=icons/plus.png vspace=4 hspace=4 width=30 onclick=\"DimLevel100('plus',",vdata,",",item.idx,')">'].join(""),min=["<img src=icons/min.png vspace=4 hspace=4 width=30 onclick=\"DimLevel100('min',",vdata,",",item.idx,')">'].join("");vdesc=String(vdesc).replace(vdesc,[vdesc,'<span class="percent">',vdata,'<span style="font-size:50%;"> &#37;</span></span>'].join("")),vdata=min.concat(down,up,plus)}"Sunny"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Sunny",["<img src=icons/meteo/night-clear.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Partly Cloudy"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Partly Cloudy",["<img src=icons/meteo/night-partlycloudy.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Cloudy"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Cloudy",["<img src=icons/meteo/night-cloudy.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Clear"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Clear",["<img src=icons/meteo/night-clear.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Rain"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Rain",["<img src=icons/meteo/night-rain.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Snow"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Snow",["<img src=icons/meteo/night-snow.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Fog"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Fog",["<img src=icons/meteo/night-fog.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Hail"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Hail",["<img src=icons/meteo/night-hail.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Thunderstom"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Thunderstorm",["<img src=icons/meteo/night-thunder.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Sleet"===vdata&&"Yes"===IsNight&&(vdata=String(vdata).replace("Sleet",["<img src=icons/meteo/night-sleet.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Sunny"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Sunny",["<img src=icons/meteo/day-sun.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Partly Cloudy"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Partly Cloudy",["<img src=icons/meteo/day-partlycloudy.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Cloudy"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Cloudy",["<img src=icons/meteo/day-cloudy.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Clear"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Clear",["<img src=icons/meteo/day-sun.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Rain"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Rain",["<img src=icons/meteo/day-rain.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Snow"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Snow",["<img src=icons/meteo/day-snow.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Fog"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Fog",["<img src=icons/meteo/day-fog.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Hail"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Hail",["<img src=icons/meteo/day-hail.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Thunderstom"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Thunderstorm",["<img src=icons/meteo/day-thunder.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Sleet"===vdata&&"No"===IsNight&&(vdata=String(vdata).replace("Sleet",["<img src=icons/meteo/day-sleet.png width=155 height=155 onclick=\"lightbox_open('meteo",lastseen,"', 25400)\">"].join(""))),"Closed"!==vdata||"Contact"!==item.SwitchType&&"Door Lock"!==item.SwitchType||(vdata=txt_closed,vattr="color:#E24E2A"),"Open"!==vdata||"Contact"!==item.SwitchType&&"Door Lock"!==item.SwitchType||(vdata=txt_open,vattr="color:#1B9772");var HumidityStatus={Wet:"Humide",Comfortable:"Confortable",ccc:"333"};if("undefined"!=typeof HumidityStatus[vdata]&&(vdata=HumidityStatus[vdata]),switchclick="",("Off"===vdata||"Doorbell"===item.SwitchType)&&(switchclick=['onclick="SwitchToggle(',item.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_switch_on,')"'].join(""),"Push On Button"===item.SwitchType&&"2"!=lastseen&&"3"!=lastseen?(vdata=vdesc,vdesc=""):(vdata=txt_off,alarmcss=";color:#E24E2A;")),"On"===vdata&&(switchclick=['onclick="SwitchToggle(',item.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_switch_off,')"'].join(""),"Push Off Button"===item.SwitchType&&"2"!=lastseen&&"3"!=lastseen?(vdata=vdesc,vdesc=""):(vdata=txt_on,alarmcss=";color:#1B9772;")),"Security Panel"===item.SubType&&(switchclick='onclick="showPanel()"'),"ForecastStr"!==vtype&&("2"===lastseen||"3"===lastseen)){if("Dusk Sensor"===item.SwitchType)var icon_On="uvdark.png",icon_Off="uvsunny.png";else if("Door Lock"===item.SwitchType)var icon_On="door48open.png",icon_Off="door48.png";else if("Doorbell"===item.SwitchType)var icon_Off="doorbell48.png";else if("Contact"===item.SwitchType)var icon_On="contact48_open.png",icon_Off="contact48.png";else if("Motion Sensor"===item.SwitchType)var icon_On="motion48-on.png",icon_Off="motion48-off.png";else if("Push On Button"===item.SwitchType)var icon_Off="push48.png";else if("Push Off Button"===item.SwitchType)var icon_On="pushoff48.png";else if("Smoke Detector"===item.SwitchType)var icon_On="smoke48on.png",icon_Off="smoke48off.png";else if("Security Panel"===item.SubType){vdesc=vdata;var icon="security48.png";"Normal"===vdata&&(vdata=String(vdata).replace(vdata,["<img src=",$.domoticzurl,"/images/",icon,"  width=48>"].join(""))),"Arm Home"===vdata&&(vdata=String(vdata).replace(vdata,["<img src=",$.domoticzurl,"/images/",icon,"  width=48>"].join(""))),"Arm Away"===vdata&&(vdata=String(vdata).replace(vdata,["<img src=",$.domoticzurl,"/images/",icon,"  width=48>"].join("")))}else var icon_On=item.Image.concat("48_On.png"),icon_Off=item.Image.concat("48_Off.png");(vdata===txt_on||vdata===txt_open)&&(vdata=String(vdata).replace(vdata,["<img src=",$.domoticzurl,"/images/",icon_On," width=48>"].join(""))),(vdata===txt_off||vdata===txt_closed)&&(vdata=String(vdata).replace(vdata,["<img src=",$.domoticzurl,"/images/",icon_Off,"  width=48>"].join("")))}if("undefined"!=typeof valarm&&"SetPoint"!==vtype)if(alarmcss="",eval(valarm.replace(/x/g,"Number(vdata)"))){if(alarmcss=";color:red;",blink===!0&&!$("."+vlabel).hasClass("blink_me")){var element=document.getElementsByClassName(vlabel),i=0;jsKata.nofreeze.forloop(function(){return i<element.length},function(){i++},function(){element[i].classList.add("blink_me")})}}else if($("."+vlabel).hasClass("blink_me")){var element=document.getElementsByClassName(vlabel),i=0;jsKata.nofreeze.forloop(function(){return i<element.length},function(){i++},function(){element[i].classList.remove("blink_me")})}"Temp"===vtype&&(vattr=parseInt(vdata,10)>=35?String(vattr).replace(vattr,["color:",T35,";",vattr].join("")):parseInt(vdata,10)>=34?String(vattr).replace(vattr,["color:",T34,";",vattr].join("")):parseInt(vdata,10)>=33?String(vattr).replace(vattr,["color:",T33,";",vattr].join("")):parseInt(vdata,10)>=32?String(vattr).replace(vattr,["color:",T32,";",vattr].join("")):parseInt(vdata,10)>=31?String(vattr).replace(vattr,["color:",T31,";",vattr].join("")):parseInt(vdata,10)>=30?String(vattr).replace(vattr,["color:",T30,";",vattr].join("")):parseInt(vdata,10)>=29?String(vattr).replace(vattr,["color:",T29,";",vattr].join("")):parseInt(vdata,10)>=28?String(vattr).replace(vattr,["color:",T28,";",vattr].join("")):parseInt(vdata,10)>=27?String(vattr).replace(vattr,["color:",T27,";",vattr].join("")):parseInt(vdata,10)>=26?String(vattr).replace(vattr,["color:",T26,";",vattr].join("")):parseInt(vdata,10)>=25?String(vattr).replace(vattr,["color:",T25,";",vattr].join("")):parseInt(vdata,10)>=24?String(vattr).replace(vattr,["color:",T24,";",vattr].join("")):parseInt(vdata,10)>=23?String(vattr).replace(vattr,["color:",T23,";",vattr].join("")):parseInt(vdata,10)>=22?String(vattr).replace(vattr,["color:",T22,";",vattr].join("")):parseInt(vdata,10)>=21?String(vattr).replace(vattr,["color:",T21,";",vattr].join("")):parseInt(vdata,10)>=20?String(vattr).replace(vattr,["color:",T20,";",vattr].join("")):parseInt(vdata,10)>=19?String(vattr).replace(vattr,["color:",T19,";",vattr].join("")):parseInt(vdata,10)>=18?String(vattr).replace(vattr,["color:",T18,";",vattr].join("")):parseInt(vdata,10)>=17?String(vattr).replace(vattr,["color:",T17,";",vattr].join("")):parseInt(vdata,10)>=16?String(vattr).replace(vattr,["color:",T16,";",vattr].join("")):parseInt(vdata,10)>=15?String(vattr).replace(vattr,["color:",T15,";",vattr].join("")):parseInt(vdata,10)>=14?String(vattr).replace(vattr,["color:",T14,";",vattr].join("")):parseInt(vdata,10)>=13?String(vattr).replace(vattr,["color:",T13,";",vattr].join("")):parseInt(vdata,10)>=12?String(vattr).replace(vattr,["color:",T12,";",vattr].join("")):parseInt(vdata,10)>=11?String(vattr).replace(vattr,["color:",T11,";",vattr].join("")):parseInt(vdata,10)>=10?String(vattr).replace(vattr,["color:",T10,";",vattr].join("")):parseInt(vdata,10)>=9?String(vattr).replace(vattr,["color:",T09,";",vattr].join("")):parseInt(vdata,10)>=8?String(vattr).replace(vattr,["color:",T08,";",vattr].join("")):parseInt(vdata,10)>=7?String(vattr).replace(vattr,["color:",T07,";",vattr].join("")):parseInt(vdata,10)>=6?String(vattr).replace(vattr,["color:",T06,";",vattr].join("")):parseInt(vdata,10)>=5?String(vattr).replace(vattr,["color:",T05,";",vattr].join("")):parseInt(vdata,10)>=4?String(vattr).replace(vattr,["color:",T04,";",vattr].join("")):parseInt(vdata,10)>=3?String(vattr).replace(vattr,["color:",T03,";",vattr].join("")):parseInt(vdata,10)>=2?String(vattr).replace(vattr,["color:",T02,";",vattr].join("")):parseInt(vdata,10)>=1?String(vattr).replace(vattr,["color:",T01,";",vattr].join("")):parseInt(vdata,10)>=0?String(vattr).replace(vattr,["color:",T00,";",vattr].join("")):String(vattr).replace(vattr,["color:",T000,";",vattr].join(""))),
"Temp"===vtype&&(vdata=String(vdata).replace(vdata,['<span onclick="RefreshGraphData(',item.idx,",'",vdesc,"','temp','day','te','Température &#8451;')\">",vdata,'<sup style="font-size:50%;" >&#8451;</sup></span>'].join(""))),"Humidity"===vtype&&(vdata=String(vdata).replace(vdata,['<span onclick="RefreshGraphData(',item.idx,",'",vdesc,"','temp','day','hu','Humidité &#37;')\">",vdata,'<span style="font-size:50%;"> &#37;</span></span>'].join(""))),"Barometer"===vtype&&(vdata=String(vdata).replace(vdata,[vdata,'<span style="font-size:50%;"> hPa</span>'].join(""))),("Speed"===vtype||"Gust"===vtype)&&(vdata=String(vdata).replace(vdata,['<span onclick="RefreshGraphData(',item.idx,",'",vdesc,"','wind','day','sp','Vitesse km/h')\">",vdata,'<span style="font-size:50%;"> km/h</span></span>'].join(""))),"Rain"===item.Type&&(vdata=String(vdata).replace(vdata,['<span onclick="RefreshGraphData(',item.idx,",'",vdesc,"','rain','day','mm','Précipitations mm')\">",vdata,'<span style="font-size:50%;"> mm</span></span>'].join(""))),"UV"===item.Type&&(vdata=String(vdata).replace(vdata,[vdata,'<span style="font-size:50%;"> UVI</span>'].join(""))),"Data"===vtype&&"Percentage"===item.SubType&&(vdata=String(vdata).replace(vdata,['<span onclick="RefreshGraphData(',item.idx,",'",vdesc,"','Percentage','day','v','Pourcentage &#37;')\">",Math.ceil(vdata),'<span style="font-size:50%;"> &#37;</span></span>'].join(""))),"Usage"!==vtype||"Energy"!==item.SubType&&"CM119 / CM160"!==item.SubType&&"CM180"!==item.SubType&&"kWh"!==item.SubType||(vdata="P1 Smart Meter"===item.Type?String(vdata).replace(vdata,['<span onclick="RefreshGraphData(',item.idx,",'",vdesc,"','counter','day','p1','Electricité Watt')\">",Math.ceil(vdata),'<span style="font-size:50%;"> Watt</span></span>'].join("")):String(vdata).replace(vdata,['<span onclick="RefreshGraphData(',item.idx,",'",vdesc,"','counter&method=1','day','v','Electricité Watt')\">",Math.ceil(vdata),'<span style="font-size:50%;"> Watt</span></span>'].join(""))),"CounterToday"!==vtype||"Energy"!==item.SubType&&"CM119 / CM160"!==item.SubType&&"CM180"!==item.SubType&&"kWh"!==item.SubType||(vdata=String(vdata).replace(vdata,[Math.ceil(10*vdata)/10,'<span style="font-size:50%;"> kWh</span>'].join(""))),"Counter"!==vtype&&"Data"!==vtype||"Energy"!==item.SubType&&"CM119 / CM160"!==item.SubType&&"CM180"!==item.SubType&&"kWh"!==item.SubType||(vdata=String(vdata).replace(vdata,[Math.ceil(vdata),'<span style="font-size:50%;"> kWh</span>'].join(""))),"Euro"===vtype&&(vdata=String(vdata).replace(vdata,[Math.ceil(100*vdata)/100,'<span style="font-size:50%;"> &#8364;</span>'].join(""))),"Counter Incremental"!==item.Type||"1"!==item.SwitchTypeVal&&"2"!==item.SwitchTypeVal||(vdata=String(vdata).replace(vdata,[vdata,'<span style="font-size:50%;"> m&#179;</span>'].join(""))),"Counter Incremental"!==item.Type||"0"!==item.SwitchTypeVal&&"4"!==item.SwitchTypeVal||(vdata=String(vdata).replace(vdata,[vdata,'<span style="font-size:50%;"> kWh</span>'].join(""))),"Solar Radiation"===item.SubType&&(vdata=String(vdata).replace(vdata,[vdata,'<span style="font-size:50%;"> W/m&#178;</span>'].join(""))),"RFXMeter"===item.Type&&"3"===item.SwitchTypeVal&&(vdata=String(vdata).replace(vdata,['<span onclick="RefreshGraphData(',item.idx,",'",vdesc,"','counter','day','v','Compteur')\">",vdata,"</span>"].join(""))),"Voltage"===vtype&&(vdata=String(vdata).replace(vdata,['<span onclick="RefreshGraphData(',item.idx,",'",vdesc,"','counter','day','v','Tension V')\">",Math.ceil(100*vdata)/100,'<span style="font-size:50%;"> V</span></span>'].join(""))),"undefined"==typeof vattr?item.Protected===!0?$(["div.",vlabel].join("")).html(["<div onClick=\"lightbox_open('protected', ",switch_protected_timeout,", ",txt_switch_protected,')" style=',alarmcss,">",vdata,"</div>"].join("")):$(["div.",vlabel].join("")).html(["<div ",switchclick," style=",alarmcss,">",vdata,"</div>"].join("")):item.Protected===!0?$(["div.",vlabel].join("")).html(["<div onClick=\"lightbox_open('protected', ",switch_protected_timeout,", ",txt_switch_protected,')" style=',vattr,alarmcss,">",vdata,"</div>"].join("")):$(["div.",vlabel].join("")).html(["<div ",switchclick," style=",vattr,alarmcss,">",vdata,"</div>"].join("")),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html(vdesc)}else if("Text"===$.PageArray[ii][1]){var vlabel=$.PageArray[ii][2],vdesc=$.PageArray[ii][3],vattr=$.PageArray[ii][6],valarm="";$(["div.",vlabel].join("")).html(["<div style=",vattr,">",vdesc,"</div>"].join("")),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html("")}else if("Hide"===$.PageArray[ii][1]){var vlabel=$.PageArray[ii][2],vdata=$.PageArray[ii][3],vdesc="",valarm="";$(["div.",vlabel].join("")).html(""),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html("")}else if("Link"===$.PageArray[ii][1]){var vlabel=$.PageArray[ii][2],vdata=$.PageArray[ii][3],vdesc="",valarm="";$(["div.",vlabel].join("")).html(["<div>",vdata,"</div>"].join("")),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html("")}else if("Clock"===$.PageArray[ii][1]){var vlabel=$.PageArray[ii][2],vdata=currentTime(),vdesc="",vattr=$.PageArray[ii][6],valarm="";$(["div.",vlabel].join("")).html(["<div style=",vattr,">",vdata,"</div>"].join("")),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html("")}else if("Date"===$.PageArray[ii][1]){var vlabel=$.PageArray[ii][2],vdata=currentDate(),vdesc="",vattr=$.PageArray[ii][6],valarm="";$(["div.",vlabel].join("")).html(["<div style=",vattr,">",vdata,"</div>"].join("")),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html("")}else if("MonthYear"===$.PageArray[ii][1]){var vlabel=$.PageArray[ii][2],vdata=currentMonthYear(),vdesc="",vattr=$.PageArray[ii][6],valarm="";$(["div.",vlabel].join("")).html(["<div style=",vattr,">",vdata,"</div>"].join("")),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html("")}else if("SunRise"===$.PageArray[ii][1]){var vlabel=$.PageArray[ii][2],vdesc="",vattr=$.PageArray[ii][6],valarm="";$(["div.",vlabel].join("")).html(["<div style=",vattr,">",var_sunrise,"</div>"].join("")),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html(txt_sunrise)}else if("SunSet"===$.PageArray[ii][1]){var vlabel=$.PageArray[ii][2],vdesc="",vattr=$.PageArray[ii][6],valarm="";$(["div.",vlabel].join("")).html(["<div style=",vattr,">",var_sunset,"</div>"].join("")),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html(txt_sunset)}else if("SunBoth"===$.PageArray[ii][1]){var vlabel=$.PageArray[ii][2],vdesc="",vattr=$.PageArray[ii][6],valarm="";$(["div.",vlabel].join("")).html(["<div style=",vattr,'><img src=icons/sun.png  height="15" width="15" style="PADDING-RIGHT: 2px;">',var_sunrise,'<img src=icons/moon.png  height="15" width="15" style="PADDING-LEFT: 15px;">',var_sunset,"</div>"].join("")),$(["div.desc_",vlabel].join("")).length>0&&$(["div.desc_",vlabel].join("")).html(txt_sunboth)}})})}),$.ajax({url:[$.domoticzurl,"/json.htm?type=scenes&plan=",$.roomplan,"&jsoncallback=?"].join("")}).done(function(t){"undefined"!=typeof t.result&&$.each(t.result,function(t,e){var i=0,a=$.PageArray_Scenes.length;jsKata.nofreeze.forloop(function(){return a>i},function(){i++},function(){if($.PageArray_Scenes[i][0]===e.idx||$.PageArray_Scenes[i][0]===e.Name){var t=$.PageArray_Scenes[i][1],a=$.PageArray_Scenes[i][2],n=$.PageArray_Scenes[i][3],o=$.PageArray_Scenes[i][4],s=$.PageArray_Scenes[i][5],r=e[t];if("undefined"==typeof r?r=['<span onclick="helpBox_open(',e.idx,')">?!</span>'].join(""):(r=String(r).split("Watt",1)[0],r=String(r).split("kWh",1)[0]),switchclick="",alarmcss="",("Off"===r||"Scene"===e.Type)&&(switchclick=['onclick="SceneToggle(',e.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_switch_on,')"'].join(""),"Scene"===e.Type?(r=n,n=""):(r=txt_off,alarmcss=";color:#E24E2A;")),"On"===r&&(switchclick=['onclick="SceneToggle(',e.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_switch_off,')"'].join(""),alarmcss=";color:#1B9772;",r=txt_on),"Mixed"===r){var l=['<span style="font-size:100%;position:relative;left:-10px;color:#1B9772;" onclick="SceneToggle(',e.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_switch_on,')">',txt_on,"</span>"].join(""),c=['<span  style="font-size:100%;position:relative;left:10px;color:#E24E2A;" onclick="SceneToggle(',e.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_switch_off,')">',txt_off,"</span>"].join("");r=l.concat(c)}if(isNaN(o)&&"undefined"!=typeof o){var d=o.concat("48_On.png"),p=o.concat("48_Off.png");"Blinds"===o&&(d="blindsopen48sel.png",p="blinds48sel.png"),r===txt_on?r=String(r).replace(r,['<img src="',$.domoticzurl,"/images/",d,'" width=48>'].join("")):r===txt_off?r=String(r).replace(r,['<img src="',$.domoticzurl,"/images/",p,'"  width=48>'].join("")):(l=String(r).replace(r,['<img src="',$.domoticzurl,"/images/",d,'"  hspace=10 width=48 onclick="SceneToggle(',e.idx,", 'On');lightbox_open('switch', ",switch_timeout,", ",txt_switch_on,')">'].join("")),c=String(r).replace(r,['<img src="',$.domoticzurl,"/images/",p,'"  hspace=10 width=48 onclick="SceneToggle(',e.idx,", 'Off');lightbox_open('switch', ",switch_timeout,", ",txt_switch_off,')">'].join("")),r=l.concat(c))}"undefined"==typeof s?$(["div.",a].join("")).html(["<div ",switchclick," style=",alarmcss,">",r,"</div>"].join("")):$(["div.",a].join("")).html(["<div ",switchclick," style=",s+alarmcss,">",r,"</div>"].join("")),$(["div.desc_",a].join("")).length>0&&$(["div.desc_",a].join("")).html(n)}})})}),$.refreshTimer=setInterval(RefreshData,refresh)}function GetCams(){var t=0,e=$.PageArray.length;jsKata.nofreeze.forloop(function(){return e>t},function(){t++},function(){if("Camera"===$.PageArray[t][1]){var e=$.PageArray[t][2],i=$.PageArray[t][3],a=$.PageArray[t][4];(""===a||"undefined"==typeof a)&&(a=[location.href.replace(/\/$/,""),"/icons/offline.jpg"].join("")),$(["div.",e].join("")).html(["<img src=",i," alt=",a," class='camera' >"].join("")),$(["div.",e," img"].join("")).error(function(){this.onerror=null,this.src===this.alt?this.src=[location.href.replace(/\/$/,""),"/icons/offline.jpg"].join(""):this.src=this.alt}),$(["div.",e," img"].join("")).click(function(){$("#popup_camera").html(["<img src=",this.src," >"].join("")),lightbox_open("camera",25400)}),$(["div.desc_",e].join("")).length>0&&$(["div.desc_",e].join("")).html("")}})}function SceneToggle(t,e){$.ajax({url:[$.domoticzurl,"/json.htm?type=command&param=switchscene&idx=",t,"&switchcmd=",e,"&level=0"].join(""),success:function(){console.log("SUCCES"),new RefreshData},error:function(){console.log("ERROR")}})}function SwitchToggle(t,e){$.ajax({url:[$.domoticzurl,"/json.htm?type=command&param=switchlight&idx=",t,"&switchcmd=",e,"&level=0"].join(""),success:function(){console.log("SUCCES"),new RefreshData},error:function(){console.log("ERROR")}})}function DimLevel16(t,e,i,a){if(e===txt_off)1===a&&a++,$.ajax({url:[$.domoticzurl,"/json.htm?type=command&param=switchlight&idx=",i,"&switchcmd=Set Level&level=",a].join(""),success:function(){console.log("SUCCES"),new RefreshData},error:function(){console.log("ERROR")}});else if(e=1*e,"plus"===t){var n=(e+10)/100*16+.5;n>16&&(n=16),$.ajax({url:[$.domoticzurl,"/json.htm?type=command&param=switchlight&idx=",i,"&switchcmd=Set Level&level=",n].join(""),success:function(){console.log("SUCCES"),new RefreshData},error:function(){console.log("ERROR")}})}else{var n=(e-.1)/100*16;0>n&&(n=0),$.ajax({url:[$.domoticzurl,"/json.htm?type=command&param=switchlight&idx=",i,"&switchcmd=Set Level&level=",n].join(""),success:function(){console.log("SUCCES"),new RefreshData},error:function(){console.log("ERROR")}})}}function DimLevel100(t,e,i){if("plus"===t){var a=e+10;a>100&&(a=100),$.ajax({url:[$.domoticzurl,"/json.htm?type=command&param=switchlight&idx=",i,"&switchcmd=Set Level&level=",a].join(""),success:function(){console.log("SUCCES"),new RefreshData},error:function(){console.log("ERROR")}})}else{var a=e-10;0>a&&(a=0),$.ajax({url:[$.domoticzurl,"/json.htm?type=command&param=switchlight&idx=",i,"&switchcmd=Set Level&level=",a].join(""),success:function(){console.log("SUCCES"),new RefreshData},error:function(){console.log("ERROR")}})}}function ChangeTherm(t,e,i,a,n){newvalue="","plus"===t?a+e>n?newvalue=n:newvalue=a+e:"min"===t&&(e>a?newvalue=1:newvalue=a-e),$.ajax({url:[$.domoticzurl,"/json.htm?type=command&param=udevice&idx=",i,"&nvalue=0&svalue=",newvalue].join(""),success:function(){console.log("SUCCES"),new RefreshData},error:function(){console.log("ERROR")}})}function currentTime(){var t=new Date,e=t.getHours().toString();e=e.trim(),1===e.length&&(e="0"+e);var i=t.getMinutes().toString();i=i.trim(),1===i.length&&(i="0"+i);var a=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],n=a[t.getDay().toString()],o=t.getDate().toString();o=o.trim(),1===o.length&&(o="0"+o);var s=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Décembre"],r=s[t.getMonth().toString()];if(showMonth===!0)var l=['<span style="font-size:120%;position:relative;top:-5px;">',e,":",i,'</span><br><span style="font-size:35%;position:relative;top:-40px;">',n," ",o," ",r,"</span>"].join("");else var l=['<span style="font-size:120%;position:relative;top:-5px;">',e,":",i,'</span><br><span style="font-size:35%;position:relative;top:-40px;">',n," ",o,"</span>"].join("");return l}function currentDate(){var t=new Date,e=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],i=e[t.getDay().toString()],a=t.getDate().toString();a=a.trim(),1===a.length&&(a="0"+a);var n=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Décembre"],o=n[t.getMonth().toString()];if(showMonth===!0)var s=['<span style="font-size:50%;">',i," ",a," ",o,"</span>"].join("");else var s=['<span style="font-size:50%;">',i," ",a,"</span>"].join("");return s}function currentMonthYear(){var t=new Date,e=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Décembre"],i=e[t.getMonth().toString()],a=t.getFullYear().toString(),n=['<span style="font-size:60%;position:relative;top:-5px;">',i,'</span><br><span style="font-size:55%;position:relative;top:-40px;">',a,"</span>"].join("");return n}function goodmorning(t){var e=t.substring(0,2),i=t.substring(3,5),a=t.substring(8,10),n=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],o=n[t.substring(6,7)-1],s=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Décembre"],r=s[t.substring(11,13).replace(/^0+/,"")-1],l=t.substring(14,18),c=new Date,d=new Date(l,t.substring(11,13).replace(/^0+/,"")-1,a,e,i);if(showMonth===!0)var p=['<span style="font-size:100%;position:relative;top:-5px;">',e,":",i,'</span><br><span style="font-size:35%;position:relative;top:-40px;">',o," ",a," ",r,"</span>"].join("");else var p=['<span style="font-size:100%;position:relative;top:-5px;">',e,":",i,'</span><br><span style="font-size:35%;position:relative;top:-40px;">',o," ",a,"</span>"].join("");if(c>d)var p="<img src=icons/sleep.png  height='70' width='70'>";return p}$.ajaxSetup({dataType:"json",async:!0,cache:!1});var tempo,var_sunrise="",var_sunset="",IsNight="No",error=0;